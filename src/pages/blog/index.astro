---
import BaseLayout from '../../layouts/BaseLayout.astro';
import { getCollection } from 'astro:content';
import FormattedDate from '../../components/FormattedDate.astro';

const posts = (await getCollection('blog')).sort(
	(a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf(),
);
---

<BaseLayout title="Blog Posts">
	<div class="blog-content">
		<h1 class="page-title">Blog Posts</h1>
		
		<div id="post-list">
			{posts.map((post) => (
				<div class="post-preview">
					<h2>
						<a href={`/blog/${post.slug}/`}>{post.data.title}</a>
					</h2>
					
					<div class="post-meta">
						<i class="far fa-clock"></i>
						<span class="post-date">
							<FormattedDate date={post.data.pubDate} />
						</span>
					</div>
					
					<div class="post-content">
						<p>{post.data.description}</p>
					</div>
					
					<a href={`/blog/${post.slug}/`} class="read-more">Read more â†’</a>
				</div>
			))}
		</div>
	</div>
</BaseLayout>

<style>
	.post-preview {
		margin-bottom: 3rem;
		padding-bottom: 2rem;
		border-bottom: 1px solid rgba(0, 0, 0, 0.1);
	}
	
	.post-preview:last-child {
		border-bottom: none;
	}
	
	.post-preview h2 {
		margin-bottom: 0.5rem;
		font-size: 1.8rem;
	}
	
	.post-meta {
		color: #6c757d;
		font-size: 0.9rem;
		margin-bottom: 1rem;
	}
	
	.post-content {
		margin: 1rem 0;
	}
	
	.read-more {
		display: inline-block;
		font-weight: 500;
	}
</style>